---
Owner: Nikita Vdovin
tags:
  - DT
  - Onboarding
---
# Факторный анализ. Козина С.

Факторный анализ — это метод статистического анализа, который помогает понять структуру данных. Его цель — выявить скрытые факторы, которые влияют на наблюдаемые переменные.

Представьте, что у вас есть опрос, в котором люди отвечают на множество вопросов о своих предпочтениях, привычках и мнениях. Эти ответы можно представить в виде чисел. Факторный анализ помогает определить общие темы или факторы, которые объясняют вариации в этих числах. Например, ответы на разные вопросы могут зависеть от таких факторов, как “социальная активность” или “экономический статус”.

Проще говоря, факторный анализ помогает сократить сложные данные до нескольких ключевых факторов, которые легче анализировать и интерпретировать.

# Что такое факторный анализ

Метод, который позволяет изучать связи между переменными.

Условно: есть ряд факторов (переменных) и есть целевая переменная. С помощью применения математических вычислений мы можем понимать, какой фактор больше всего влияет на нашу целевую переменную.

# В системе

## Дашборд

На дашборде мы видим фильтр, с помощью которого можно задать целевую переменную.

В связи с тем, что у нас есть несколько типов переменных, есть некоторые особенности. Для разных типов переменных используются разные методы.

### При сравнении двух чисел

Если целевая переменная и переменная, с которой мы сравниваем - числовые, то применяется классический коэффициент корреляции.

https://ru.wikipedia.org/wiki/Корреляция

В ClickHouse есть функция, которая это рассчитывает автоматически.

### При сравнении текста и числа

Если одна переменная числовая, а другая — текстовая, то также используется корреляция, но немного модифицированная.

Света приводит в пример случай с предметами в школе:

Допустим есть несколько дисциплин, что названия - текст. Текст нельзя посчитать, сложить или умножить. Но за этим текстом есть баллы по дисциплине.

В итоге, для того, чтобы узнать, насколько одна переменная влияет на другую, нужно воспользоваться формулой, где в числителе будет:

количество элементов в предмете*(средний балл по предмету - средний балл по всем предметам)^2 — так для каждого предмета, и результаты сложить. Это числитель.

А в знаменателе:

(1-й элемент - среднее по всем баллам) + (n-й элемент - среднее по всем баллам) — сумма по всем элементам всех предметов

А формула выглядит как корень из деления числителя на знаменатель.

### При сравнении двух категорий (текстов)

Тут вычисляется влияние канала входа на результат процесса, где результатом считается “Успех” или “Не успех”.

Используется метод **ЭНТРОПИЯ**

### **Энтропия в математике**

Энтропия — это мера неопределенности или случайности в системе. В статистике и теории информации энтропия используется для количественной оценки информации, которая содержится в вероятностном распределении. Она позволяет понять, насколько случайной или предсказуемой является система.

**Формула энтропии**

Формулу можно найти здесь:

[Энтропия](https://ru.wikipedia.org/wiki/%D0%AD%D0%BD%D1%82%D1%80%D0%BE%D0%BF%D0%B8%D1%8F)

**Применение энтропии**

Энтропия используется для оценки информации, полученной при наблюдении случайной величины. Например, в машинном обучении и теории информации энтропия помогает определить, сколько информации содержится в признаках данных.

**Применение энтропии в факторном анализе**

В факторном анализе энтропия используется для понимания, насколько один фактор влияет на другой. Например, можно использовать энтропию для оценки влияния входного канала на результат процесса. Если энтропия высока, это означает, что результат процесса менее предсказуем и зависит от многих факторов. Если энтропия низкая, это указывает на более предсказуемый результат.

В конкретном случае сравнения двух категорий (текстов), энтропия может помочь определить, насколько информация о входном канале влияет на успех или неуспех результата. Это позволяет сделать выводы о значимости различных факторов и их влиянии на целевую переменную.

## Под капотом

**Как считается коэффициент влияния**:

На вход скрипта подаются две переменные: целевая и та переменная, которую мы хотим сравнить с целевой.

1. Определяется тип переменной;
2. По фильтру двигаемся ниже. Тут для каждого вида переменной вычисляется тип вычисления (см. выше);
3. Что внутри:
    1. Для корреляции — corr() в ClickHouse
    2. Для текст vs число — формула реализовывается в SQL.  
          
        _Зачем ставить восклицательный знак перед блоком?  
        Возвращается название поля, название таблицы.  
        _
    3. Для текстов — энтропия.
4. Получаем вывод в компонент в дашборде.

Энтропия в системе

1. Группируем таблицу по двум признакам. Получается матрица (сводная таблица)  
      
    _Что с чем группируется? По каким признакам? Что такое “вероятность встречаемости”?_